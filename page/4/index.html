<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Return To Innocence</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Return To Innocence">
<meta property="og:url" content="https://fioneragh.github.io/page/4/index.html">
<meta property="og:site_name" content="Return To Innocence">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Return To Innocence">
  
    <link rel="alternate" href="/atom.xml" title="Return To Innocence" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.proxy.ustclug.org/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Return To Innocence</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">We should remember what we have done.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives/">文章</a>
        
          <a class="main-nav-link" href="/resume/">简历</a>
        
          <a class="main-nav-link" href="/about/">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 流"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://fioneragh.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Iterator-元素的删除" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/02/Iterator-元素的删除/" class="article-date">
  <time datetime="2017-08-02T05:34:23.000Z" itemprop="datePublished">2017-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/02/Iterator-元素的删除/">Iterator 元素的删除</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-问题情景"><a href="#0x81-问题情景" class="headerlink" title="0x81 问题情景"></a>0x81 问题情景</h3><p>有一个链式列表LinkedList，我们需要对其中的元素进行遍历，如果遇到符合条件的元素，则从LinkedList中删除该元素，为了方便遍历我们通常使用forE的方式进行遍历，满足条件再remove掉元素：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (RequirementBean requirementBean : requirementBeanList) &#123;</span><br><span class="line">    <span class="keyword">if</span> (TextUtils.equals(requirementBean.getUuid(),</span><br><span class="line">        (String) cardView.getTag())) &#123;</span><br><span class="line">        requirementBeanList.remove(requirementBean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是执行这段代码很不幸的触发了异常ConcurrentModificationException。</p>
<p><img src="/images/2017_08_02_01.png" alt="异常结果"></p>
<h3 id="0x82-异常原因"><a href="#0x82-异常原因" class="headerlink" title="0x82 异常原因"></a>0x82 异常原因</h3><p>首先我们要明白forE的遍历机制，其实它的内部实现就是通过迭代器Iterator实现的，也就是说它本身也是Collection.iterator()后使用iterator.next()的方式遍历元素。关于Iterator网上的解释是<code>Iterator 是工作在一个独立的线程中，并且拥有一个 mutex 锁。Iterator 被创建之后会建立一个指向原来对象的单链索引表，当原来的对象数量发生变化时，这个索引表的内容不会同步改变，所以当索引指针往后移动的时候就找不到要迭代的对象，所以按照 fail-fast 原则 Iterator 会马上抛出 java.util.ConcurrentModificationException 异常。</code></p>
        
          <p class="article-more-link">
            <a href="/2017/08/02/Iterator-元素的删除/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/08/02/Iterator-元素的删除/" data-id="ckfsdx7b70011r49zlkeqk6bp" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Iterator/">Iterator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Android-O-Font-Support" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/01/Android-O-Font-Support/" class="article-date">
  <time datetime="2017-08-01T10:58:57.000Z" itemprop="datePublished">2017-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/01/Android-O-Font-Support/">Android O Font Support</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-早期的字体支持"><a href="#0x81-早期的字体支持" class="headerlink" title="0x81 早期的字体支持"></a>0x81 早期的字体支持</h3><p>在平时的开发当中，我们通常不会去手动干预应用的字体，因为使用系统的字体时，如果系统的字体发生改变，相应的我们的APP也会跟着改变。可是有的时候产品会有特殊的需求，我们需要保持整体的界面风格或者在某些位置我们需要使用特殊风格的艺术字体，更有甚者使用iconfont作为app的图标来源，在这种状况下我们就需要修改我们应用内的字体从而达到我们想要的效果。</p>
<p>在Android O之前的平台，字体一直是作为普通资源存在的，它不像Drawable中的图片拥有自己的resId从而通过R文件的方式引用它。Google推荐我们将字体放入Android的静态资源目录assets下，然后通过Typeface提供的方法createFromAsset获取Typeface对象并设置给TextView：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Typeface typeFace = Typeface.createFromAsset(context.getAssets(), <span class="string">"number.otf"</span>);</span><br><span class="line">        setTypeface(typeFace);</span><br></pre></td></tr></table></figure>
<p>这种方式是在Java带马当中进行设置，在xml中通常是没有效果的，xml的typeface和fontFamily的支持也有限，我们有时候会使用自定义属性来自定义字体的处理。</p>
<p>所幸，在Android O之后，Google终于又将字体支持提上了台面。</p>
<h3 id="0x82-Android-Studio-3-0-对字体的支持"><a href="#0x82-Android-Studio-3-0-对字体的支持" class="headerlink" title="0x82 Android Studio 3.0 对字体的支持"></a>0x82 Android Studio 3.0 对字体的支持</h3><p>Android Studio已经可以直接预览字体文件，并且提供了对font资源的支持，我们只需要将字体文件放入res/font资源文件夹，AS会为字体文件生成资源ID，但是这个字体文件还不推荐直接使用，我们需要创建一个xml资源描述文件来描述一个fontFamily才能在程序中使用它：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font-family</span> <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">font</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:font</span>=<span class="string">"@font/number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fontStyle</span>=<span class="string">"normal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fontWeight</span>=<span class="string">"400"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:font</span>=<span class="string">"@font/number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:fontStyle</span>=<span class="string">"normal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:fontWeight</span>=<span class="string">"400"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:targetApi</span>=<span class="string">"o"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">font-family</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面描述了一个字重400普通风格的number字体，其中app命名空间是为了向后兼容，其中对于字重的信息可以去看维基百科。</p>
<p>对于Java代码中字体资源的使Google提供了新的ResourceCompat类来帮助我们返回Typeface：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Typeface typeFace = ResourcesCompat.getFont(context, R.font.number_font);</span><br><span class="line">setTypeface(typeFace);</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2017/08/01/Android-O-Font-Support/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/08/01/Android-O-Font-Support/" data-id="ckfsdx7aj000br49zadn9kpkx" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Font/">Font</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-PopupWindow中使用Fragment的坑" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/24/PopupWindow中使用Fragment的坑/" class="article-date">
  <time datetime="2017-07-24T10:25:30.000Z" itemprop="datePublished">2017-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/24/PopupWindow中使用Fragment的坑/">PopupWindow中使用Fragment的坑</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-产品需求"><a href="#0x81-产品需求" class="headerlink" title="0x81 产品需求"></a>0x81 产品需求</h3><p>项目中存在一个弹出窗口，其内部有很多筛选条件用于筛选，后来这个筛选条件分了一个大组，变成了具体到组内的筛选条件，这样就必然要进行View结构上的更改。因为之前是用PopupWindow做的，新需求又是要分页切换筛选，我首先想到干脆扔个ViewPager加个FragmentPagerAdapter，把SupportFragmentManager传进去就可以了，这样原来的筛选View复用，省不少事。后来发现我果然想得太简单了，遇到了十分熟悉的一个异常<code>java.lang.IllegalArgumentException</code>。这个异常通常指代参数非法，比如使用了一个根本不存在的参数，而具体到错误描述，居然是<code>No view found for id 0x7f0d0136(com.fionera.base:id/vp_filter_container) for Fragment...</code>，意思是Android根据id并没有找到对应的View。</p>
<h3 id="0x82-问题原因"><a href="#0x82-问题原因" class="headerlink" title="0x82 问题原因"></a>0x82 问题原因</h3><p>根据描述<code>No view found for id 0x7f0d0136(com.fionera.base:id/vp_filter_container) for Fragment...</code>，源码中异常抛出的部分如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ViewGroup container = <span class="keyword">null</span>;  </span><br><span class="line"><span class="keyword">if</span> (f.mContainerId != <span class="number">0</span>) &#123;  </span><br><span class="line">    container = (ViewGroup)mContainer.onFindViewById(f.mContainerId);  </span><br><span class="line">    <span class="keyword">if</span> (container == <span class="keyword">null</span> &amp;&amp; !f.mRestored) &#123; </span><br><span class="line">        throwException(<span class="keyword">new</span> IllegalArgumentException(<span class="string">"No view found for id 0x"</span> + Integer.toHexString(f.mContainerId) + <span class="string">" ("</span> + f.getResources().getResourceName(f.mContainerId) + <span class="string">") for fragment "</span> + f));  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以发现，在通过FragmentManager为Fragment寻找Container的时候发生了container变量为空，从而触发了异常，而这个f.mContainerId就是ViewPager的id。由此可以猜测，使用FragmentManager的Transition应该也会触发这个错误（待验证）。现在核心的问题就在于FragmentManager的<code>mContainer.onFindViewById(f.mContainerId)</code>返回null，这意味着mContainer中没有这个id的控件，根据平时开发的理解，mContainer通常是Activity或Fragment中指定的（我们通过AppCompatActivity#getSupportFragmentManager或v4.Fragment#getChildFragmentManager对Fragment进行管理），而PopupWindow是一个非常独特的东西，它的ContentView通常是独立的，虽然它使用了Activity的Window，但是在Activity中无法获取PopupWindow中的View（指的是没办法在Activity的根View中通过findViewById找到，Dialog也一样且Dialog有自己的Window），所以FragmentManager中是拿不到View的，自然会抛出异常。也就是说，在所有没有直接attach在RootView上的自定义View中使用Fragment都会出现这个问题，因为它附加Container是我们没办法控制的。</p>
<h3 id="0x83-解决方案"><a href="#0x83-解决方案" class="headerlink" title="0x83 解决方案"></a>0x83 解决方案</h3><ol>
<li><p>使用PagerAdapter</p>
<p> 我们可以不使用Fragemnt*PagerAdapter等涉及到FragmentManager的Adapter，而是使用最原始的PagerAdapter，这样我们便可以自己控制View，将原本的Fragment切换成有状态保护的自定义View即可。</p>
</li>
<li><p>使用DialogFragment</p>
<p> 其实Dialog如果不做处理也会出现这种问题，Google提供了DialogFragment这一方案，它比Dialog更灵活，还具有Fragment的特性，还能通过tag让FragmentManager进行缓存。但是有一点需要自行处理，就是DialogFragment的展示行为形同Dialog，诸如PopupWindow的showAsDropDown可能要自己进行具体的实现。</p>
</li>
</ol>
<p>这个问题遇到的人可能不多，因为很少会有这种情况，StackOverFlow上有关的讨论也不多，支持较多的都是替换为DialogFragment。说句题外话，我觉得BottomSheet更适合实现这种需求，但是原型设计的事情我们说的往往不算：（</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/07/24/PopupWindow中使用Fragment的坑/" data-id="ckfsdx7bk001lr49zamu8a3z9" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PopupWindow/">PopupWindow</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-使用-RxLifecycle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/21/使用-RxLifecycle/" class="article-date">
  <time datetime="2017-07-21T06:17:43.000Z" itemprop="datePublished">2017-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/21/使用-RxLifecycle/">使用 RxLifecycle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="2017-07-21修改"><a href="#2017-07-21修改" class="headerlink" title="[2017-07-21修改]"></a>[2017-07-21修改]</h2><h3 id="0x80-“解除订阅”"><a href="#0x80-“解除订阅”" class="headerlink" title="0x80 “解除订阅”"></a>0x80 “解除订阅”</h3><p>经过进一步的使用和Github上README的解释，Rxlifecycle实际上并没有真正的解除订阅关系，而只是终止了事件流，如若需要显式地解除订阅（比如doOnUnsubscribe/doOnDispose的操作）可能仍然需要手动解除。另一方面，如果事件流已经停止并且没有强引用的对象存在，当发生GC时变为DISPOSED状态的Disposable最终会被回收。</p>
<h3 id="0x81-响应式编程"><a href="#0x81-响应式编程" class="headerlink" title="0x81 响应式编程"></a>0x81 响应式编程</h3><p>RxJava 为编程带来的便利性毋庸置疑，它把我这种编码猴子从复杂的多线程编程和回调地狱中解救出来。<br>流式的业务处理让原本复杂的多线程逻辑变得符合人类思维，事件发起者（被关注者）Observable 可以立即或随时的发送事件，订阅者接受事件进行处理。<br>一旦订阅者与被订阅的者建立联系Subscribtion，如果此时不想接受事件的订阅，还可以进行解除订阅。<br>在Android 编程当中，很多元素都有生命周期的概念，一个个钩子都与元素挂钩，而一个元素要实现某些功能通常都是在固定的生命周期当中，这便引出了生命周期与订阅的关系。<br>当然，我们可以手动处理这种关系，但是这种模板式的关系约束，完全可以抽象出来，自动管理Observable 的订阅与“解除订阅”，这便是RxLifecycle。</p>
<h3 id="0x82-RxLifecycle"><a href="#0x82-RxLifecycle" class="headerlink" title="0x82 RxLifecycle"></a>0x82 RxLifecycle</h3><p>RxLifecycle 是一个基于RxJava 开发的生命周期管理库，它能按配置自动管理Observable的订阅和解除。<br>要使用它只需要在<code>build.gradle</code>中添加依赖：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RxLifecycle</span></span><br><span class="line">compile <span class="string">'com.trello:rxlifecycle:1.0'</span> [<span class="number">1</span>]</span><br><span class="line">compile <span class="string">'com.trello:rxlifecycle-android:1.0'</span> [<span class="number">2</span>]</span><br><span class="line">compile <span class="string">'com.trello:rxlifecycle-components:1.0'</span> [<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>其中<code>[1]</code>是基础库，<code>[2]</code>是对Android支持，<code>[3]</code>是RxActivity、RxFragment等组件。</p>
        
          <p class="article-more-link">
            <a href="/2017/07/21/使用-RxLifecycle/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/07/21/使用-RxLifecycle/" data-id="ckfsdx7cd002dr49zdb68j1vf" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RxJava/">RxJava</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RxLifecycle/">RxLifecycle</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-利用Build-Variant启用Stetho" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/19/利用Build-Variant启用Stetho/" class="article-date">
  <time datetime="2017-07-19T10:52:04.000Z" itemprop="datePublished">2017-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/19/利用Build-Variant启用Stetho/">利用Build Variant启用Stetho</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-Stetho"><a href="#0x81-Stetho" class="headerlink" title="0x81 Stetho"></a>0x81 Stetho</h3><p>之前项目中使用了OkHttp作为网络请求工具，为了方便跟踪调试，我在项目中使用了Stetho这个调试工具来抓包。Stetho很强大，由Facebook出品，它构建了一个Debug Bridge让Chrome Developer Tools附到了Android应用上，这样便可以使用CDT对App的网络请求进行抓包并跟踪。著名的移动数据库Realm也提供了Stetho的插件方便开发者观察Realm数据库数据。</p>
<p>Stetho的集成方式很简单：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implemetation <span class="string">'com.facebook.stetho:stetho:1.5.0'</span> </span><br><span class="line">    implemetation <span class="string">'com.facebook.stetho:stetho-okhttp3:1.5.0'</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后在Application中初始化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stetho.initializeWithDefaults(<span class="keyword">this</span>);</span><br><span class="line"><span class="comment">// OkHttp3 Helper</span></span><br><span class="line"><span class="keyword">new</span> OkHttpClient.Builder().addNetworkInterceptor(<span class="keyword">new</span> StethoInterceptor()).build();</span><br></pre></td></tr></table></figure>
<h3 id="0x82-只在Debug模式下启用Stetho"><a href="#0x82-只在Debug模式下启用Stetho" class="headerlink" title="0x82 只在Debug模式下启用Stetho"></a>0x82 只在Debug模式下启用Stetho</h3><p>我们都知道，开发时的辅助工具我们在发布版本时都是要去除的，冗余代码不说，所有切入式的调试工具都会影响App的性能。因此我们要保证只在Debug模式下编译代码到App并启用，而发布模式需要排除代码并去除初始化的Api调用。</p>
<p>最直接的办法，就是在发包时手动去除代码，移除依赖。当然Build Variant的支持下，我们可以使用Gradle强大的依赖管理来完成这件事情：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    debugImplemetation <span class="string">'com.facebook.stetho:stetho:1.5.0'</span> </span><br><span class="line">    debugImplemetation <span class="string">'com.facebook.stetho:stetho-okhttp3:1.5.0'</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过这种方式我们就能保证只有在debug下才会依赖Stetho，然后利用Build Variant分离代码的特点，在Debug的文件下添加初始化Api的调用，而Release不写就可以达到目的，我们便不需要再手动去管理打包的依赖问题。</p>
<p><img src="/images/2017_07_19_01.png" alt="分离式的工程结构"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/07/19/利用Build-Variant启用Stetho/" data-id="ckfsdx7cs002mr49z65rpxte7" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stetho/">Stetho</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-本地aar通过module进行依赖" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/12/本地aar通过module进行依赖/" class="article-date">
  <time datetime="2017-07-12T10:17:28.000Z" itemprop="datePublished">2017-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/12/本地aar通过module进行依赖/">本地aar通过module进行依赖</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-不支持本地aar的插件"><a href="#0x81-不支持本地aar的插件" class="headerlink" title="0x81 不支持本地aar的插件"></a>0x81 不支持本地aar的插件</h3><p>Android Studio 3.0.0 canary 之后的更新使用了新的Gradle API，对原本的DSL配置作出了诸多改变，之前的<a href="https://fioneragh.github.io/2017/05/18/%E5%8D%87%E7%BA%A7%E5%88%B0gradle-plugin-3-0-0/">升级到gradle-plugin 3.0.0</a>也参照Google的官方文档讲述了如何迁移到Plugin 3.0.0。在Android Studio 进行一次次更新之后，到了canery5这个版本，该插件的行为再次发生了很大的变化，flavorSelection不能在外层定义以及<code>Local Jars In Libraries</code>带来的变更。这其中最坑的一个问题就是Local AAR 文件将不能被正确依赖：<a href="https://developer.android.google.cn/studio/build/gradle-plugin-3-0-0.html" target="_blank" rel="noopener">While using this plugin with Android Studio, dependencies on local AAR files are not yet supported.</a>。</p>
<h3 id="0x82-曲线救国——aar-module"><a href="#0x82-曲线救国——aar-module" class="headerlink" title="0x82 曲线救国——aar module"></a>0x82 曲线救国——aar module</h3><p>很多人在gradle的repo下提了issue，也表示会出现类似<code>cannot resolve *@xxx dependencies</code>的错误<a href="https://github.com/gradle/gradle/issues/2370" target="_blank" rel="noopener">Gradle 4.1 M1 break Android local aar import</a>，有人提出了一个临时的解决办法，将aar作为module提供依赖支持，通过Android Studio 的添加新module的方法，选择到入aar文件，即可根据aar文件生成一个library，该module的build.gradle文件内容如下：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configurations.maybeCreate(<span class="string">"default"</span>)</span><br><span class="line">artifacts.add(<span class="string">"default"</span>, file(<span class="string">'ptr_lib-1.0.0.aar'</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/images/2017_07_12_01.png" alt="目录结构"></p>
<p>这样配置过后，移除原本的flatLibs{}配置并将implementation换成library便能成功处理依赖了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/07/12/本地aar通过module进行依赖/" data-id="ckfsdx7de0037r49z1t82oz2g" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Gradle/">Gradle</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-配置webpack-dev-server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/配置webpack-dev-server/" class="article-date">
  <time datetime="2017-07-04T11:13:55.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/配置webpack-dev-server/">配置webpack-dev-server</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-webpack配置文件"><a href="#0x81-webpack配置文件" class="headerlink" title="0x81 webpack配置文件"></a>0x81 webpack配置文件</h3><p>webpack作为一个模块化工具，在提供打包功能时我们通常不会直接调用webpack命令去生成目标文件。因为开发过程中代码是频繁变化的，如果我们手动去处理将会增加非常多的无意义的体力劳动，因此虽然webpack提供的默认配置文件webpack.config.js文件已经帮我们省了很多事了，但这仍然是不够的。对于这种情况webpack2官方由一个构建脚本模板，模板没有特殊需求可以直接拿来用，它启动一个基于express的小型server来观察文件变化自动编译并热交换，这样我们就能在开发当中“所见即所得”。</p>
<h3 id="0x82-webpack-dev-server"><a href="#0x82-webpack-dev-server" class="headerlink" title="0x82 webpack-dev-server"></a>0x82 webpack-dev-server</h3><p>在最开始学习使用webpack的时候，官方推荐了辅助开发工具，其实这个工具就是express的一个小封装，与webpack的配置相辅相成，webpack-dev-server会主动调用webpack.config.js作为webpack配置文件，而webpack本身也提供devServer选项用于配置webpack-dev-server。</p>
        
          <p class="article-more-link">
            <a href="/2017/07/04/配置webpack-dev-server/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/07/04/配置webpack-dev-server/" data-id="ckfsdx7dl003gr49zft3nyfdl" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack-dev-server/">webpack-dev-server</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-webpack3集成vux的坑" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/27/webpack3集成vux的坑/" class="article-date">
  <time datetime="2017-06-27T11:24:43.000Z" itemprop="datePublished">2017-06-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/27/webpack3集成vux的坑/">webpack3集成vux的坑</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-使用Vux"><a href="#0x81-使用Vux" class="headerlink" title="0x81 使用Vux"></a>0x81 使用Vux</h3><p>最近一段时间又忙的要死，每每年中就是重灾期，感觉自己忙的手忙脚乱。值得庆幸的是在忙碌之中自己仍旧在坚持在学习道路上，由于公司起了一个比较大的合作项目，并打算投入使用Vue作为javascript框架并最终选用了Vux作为组件库简化开发，由于刚从webpack1转到webpack3，我这两天在手动集成vux上废了不少时间。</p>
<p>官方关于如何使用vux提供了两种方案——初始化模板和手动集成。</p>
<ol>
<li><p>模板工程<br> 这种比较适合以Vux新起的项目，它的内部使用webpack2作为模板，已经处理好了Vux的配置，可以直接开始使用。</p>
</li>
<li><p>手动集成<br> 这种适合需要使用自己webpack配置的工程，通过按照文档的描述完成配置来引入Vux组件库。</p>
</li>
</ol>
<h3 id="0x82-rules和loaders对vux-loader的影响"><a href="#0x82-rules和loaders对vux-loader的影响" class="headerlink" title="0x82 rules和loaders对vux-loader的影响"></a>0x82 rules和loaders对vux-loader的影响</h3><p>webpack从1到2很大的一个变化就是对于加载器的支持方式，webpack1中的loaders被更换为更加灵活的rules，而vux-loader就以module中是否存在rules来判断开发者使用的webpack版本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check webpack version by module.loaders</span></span><br><span class="line"><span class="keyword">let</span> isWebpack2</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> vuxConfig.options.isWebpack2 !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    isWebpack2 = vuxConfig.options.isWebpack2</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldConfig.module &amp;&amp; oldConfig.module.rules) &#123;</span><br><span class="line">    isWebpack2 = <span class="literal">true</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldConfig.module &amp;&amp; oldConfig.module.loaders) &#123;</span><br><span class="line">    isWebpack2 = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然这只是判断条件之一，后面还根据package.json配置文件进一步判断。</p>
<p>上面这种判断方式导致会出现一个问题，就是webpack2其实为了兼容性仍旧保留了loaders语法，如果不是使用webpack2推荐的方式进行配置，就可能导致vux-loader认为开发者使用的是webpack1从而配置失败。</p>
        
          <p class="article-more-link">
            <a href="/2017/06/27/webpack3集成vux的坑/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/06/27/webpack3集成vux的坑/" data-id="ckfsdx7c00025r49zmcf09vx9" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vux/">vux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-从webpack1迁移到webpack2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/22/从webpack1迁移到webpack2/" class="article-date">
  <time datetime="2017-06-22T01:39:22.000Z" itemprop="datePublished">2017-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/22/从webpack1迁移到webpack2/">从webpack1迁移到webpack2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-webpack-3-0-0的发布"><a href="#0x81-webpack-3-0-0的发布" class="headerlink" title="0x81 webpack 3.0.0的发布"></a>0x81 webpack 3.0.0的发布</h3><p>webpack是一个模块化构建工具，它与一般的构建任务工具gulp不同，它不仅能完成构建任务，webpack还可以完成项目的模块化功能，从而更方便的处理项目中的依赖关系，并且在构建打包时可以根据依赖图高效的增量构建。JS的依赖管理其实有非常多种实现方式，如Node.js的CommonJS方式、AMD/CMD等等，但是这些依赖管理方式要么过于繁琐要么不支持异步，因此ECMAScript6规范了import语法来像python一样管理依赖。虽然官方规范很好，但是浏览器的支持程度是一步步推进的，在平常的开发当中我们仍然使用es5语法，但是webapck默认实现了import/export的依赖管理方式，如果项目要使用其他es6语法，则需要babel等转换工具的支持，而webpack有相应的loader来做无缝的转换。</p>
<p>webpack 3.0.0于几天前发布，其实它相对于webpack2的变化不是很大，更多的是内部的更新，对开发者而言broken api较少，不需要做webpack1向webpack2那样大的迁移变动。由于我从接触webpack开始就是1.x，并且用的比较简单也没遇到什么问题，所以年初发布了2.x之后很意外的没有立即向webpack2迁移（虽然官方给出了迁移文档），如今3.0.0已经发布，我觉得是时候开始用webpack3了，所以这篇文章就是根据官方的文档进行迁移。</p>
<h3 id="0x82-迁移过程"><a href="#0x82-迁移过程" class="headerlink" title="0x82 迁移过程"></a>0x82 迁移过程</h3><ol>
<li><p>resolve的变更<br> 在webpack1中我的输出配置是这么写的：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">-   path: <span class="string">'dist'</span></span><br><span class="line">+   path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 意为webpack打包后输出到相对目录dist下，更新后提示path不能使用相对路径，需修改成绝对路径。根据官方文档的说法，<code>resolve.root, resolve.fallback, resolve.modulesDirectories</code>为<code>resolve.modules</code>取代：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">-   root: path.join(__dirname, <span class="string">"src"</span>)</span><br><span class="line">+   modules: [</span><br><span class="line">+       path.join(__dirname, <span class="string">"src"</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>loaders的变更<br> loader是webpack如此强大的一个很重要原因，webpack本身只能依赖和打包js文件，但是有了各种各样的loader支持，我们将可以处理任何类型的文件。</p>
<p> webpack2使用了新的rules系统，原本的module.loaders依然可用来保证兼容性，但是官方推荐使用新的命名约定。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">- preLoaders: [</span><br><span class="line">-    &#123;</span><br><span class="line">-       test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">-       loader: <span class="string">'eslint'</span>,</span><br><span class="line">-       exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">-    &#125;</span><br><span class="line">- ],</span><br><span class="line">- loaders: [</span><br><span class="line">+ rules: [</span><br><span class="line">+    &#123;</span><br><span class="line">+       test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">+       loader: <span class="string">'eslint'</span>,</span><br><span class="line">+       enforce: <span class="string">'pre'</span>,</span><br><span class="line">+       exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">+   &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">-       loader: <span class="string">'babel'</span>,</span><br><span class="line">+       loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">-       loader: <span class="string">'style-loader!css-loader'</span></span><br><span class="line">+       use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/\.vue(\?[^?]+)?$/</span>,</span><br><span class="line">-       loaders: []</span><br><span class="line">+       use: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/\.gif$/</span>,</span><br><span class="line">-       loader: <span class="string">'file'</span>,</span><br><span class="line">+       loader: <span class="string">'file-loader'</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p> loader系统的变更可以说的非常大的变更了，虽然webpack2保留了兼容语法，但是我们不知道什么时候会被移除。上面的例子中一些重要的变更基本上都有了，其中很重要的一点preLoaders和postLoaders被移除使用loaders属性替代，还有一点要注意就是loader不会再自动添加’-loader’后缀了，官方这么做是为了避免混淆。<br> PS：json-loader已经默认存在于webpack当中，不再需要手动添加。</p>
</li>
<li><p>BannerPlugin的变更<br> BannerPlugin不再支持双参数banner和options：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">-   <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">'Banner'</span>, &#123;<span class="attr">raw</span>: <span class="literal">true</span>, <span class="attr">entryOnly</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">+   <span class="keyword">new</span> webpack.BannerPlugin(&#123;<span class="attr">banner</span>: <span class="string">'Banner'</span>, <span class="attr">raw</span>: <span class="literal">true</span>, <span class="attr">entryOnly</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>其他变更<br> 主要是内置插件的变更以及对Promise异步的支持，更多的参阅官方文档。</p>
</li>
</ol>
<p>迁移的过程就这些，比向AndroidGradlePlugin3的迁移容易得多。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/06/22/从webpack1迁移到webpack2/" data-id="ckfsdx7c80029r49z8akqh2r2" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-读书笔记：ELF文件结构" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/19/读书笔记：ELF文件结构/" class="article-date">
  <time datetime="2017-06-19T11:47:34.000Z" itemprop="datePublished">2017-06-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/19/读书笔记：ELF文件结构/">读书笔记：ELF文件结构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x81-ELF文件的构成"><a href="#0x81-ELF文件的构成" class="headerlink" title="0x81 ELF文件的构成"></a>0x81 ELF文件的构成</h3><p>Linux最常见的文件就是ELF文件了，无论是目标文件、动态链接库文件还是可执行文件，都是ELF文件，它与微软Windows的PE文件类似，都是COFF的一种实现，按照某种规则存储程序代码和数据。ELF文件本身的构成简单又复杂，在之前的文章中已经简单的陈述了ELF文件可能包含的结构，在这里我们略去复杂繁琐的部分，把其中最重要的部分提取出来：ELF文件头、各个段及段表、重定位表、字符串表以及符号表等等。</p>
<h3 id="0x82-ELF文件头"><a href="#0x82-ELF文件头" class="headerlink" title="0x82 ELF文件头"></a>0x82 ELF文件头</h3><p>要分析ELF文件，就需要使用我们之前提到的readelf工具，它能帮我们分析出文件中的信息。其中ELF最开始的部分就是ELF文件头，它包括了一部分基本信息如ELF版本号和程序入口地址等等。我们使用<code>readelf -h {filename}</code>命令查看一下ELF文件头信息：</p>
<p><img src="/images/2017_06_19_01.png" alt="SimpleSection.o的文件头信息"></p>
<p>从上面的信息我们可以很容易的看出ELF文件的魔数和其基本信息，这些信息当中的所有数据结构都定义在<code>/usr/include/elf.h</code>文件当中。对于Magic Number，这是一个固定长度为16个字节的部分，对应结构体Elf32_Ehdr中的e_ident成员，其中第1个字节0x7f为ELF文件标记，紧接着三个字节0x454c46对应’E’’L’’F’三个字母，第5个字节代表ELF字长（0x00无效0x01为32位0x02为64位），第6个字节为字节序（0x00无效0x01小端0x02大端），然后一个字节是ELF版本号基本为1，其余9个字节保留补0。</p>
        
          <p class="article-more-link">
            <a href="/2017/06/19/读书笔记：ELF文件结构/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fioneragh.github.io/2017/06/19/读书笔记：ELF文件结构/" data-id="ckfsdx7di003dr49z1z9qpo5s" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ELF/">ELF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ACPI/" style="font-size: 10px;">ACPI</a> <a href="/tags/Activity/" style="font-size: 13.75px;">Activity</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/AnimatedVectorDrawable/" style="font-size: 10px;">AnimatedVectorDrawable</a> <a href="/tags/AsyncTask/" style="font-size: 10px;">AsyncTask</a> <a href="/tags/Axel/" style="font-size: 10px;">Axel</a> <a href="/tags/BLE/" style="font-size: 10px;">BLE</a> <a href="/tags/Bazel/" style="font-size: 10px;">Bazel</a> <a href="/tags/Bitmap/" style="font-size: 10px;">Bitmap</a> <a href="/tags/BroadcastReceiver/" style="font-size: 10px;">BroadcastReceiver</a> <a href="/tags/C/" style="font-size: 11.25px;">C++</a> <a href="/tags/Clang/" style="font-size: 10px;">Clang</a> <a href="/tags/Clover/" style="font-size: 11.25px;">Clover</a> <a href="/tags/ConstraintSet/" style="font-size: 10px;">ConstraintSet</a> <a href="/tags/Context/" style="font-size: 10px;">Context</a> <a href="/tags/Converter/" style="font-size: 10px;">Converter</a> <a href="/tags/CrossOver/" style="font-size: 10px;">CrossOver</a> <a href="/tags/DI/" style="font-size: 10px;">DI</a> <a href="/tags/Dagger/" style="font-size: 12.5px;">Dagger</a> <a href="/tags/DataBinding/" style="font-size: 10px;">DataBinding</a> <a href="/tags/DecimalFormat/" style="font-size: 10px;">DecimalFormat</a> <a href="/tags/Dex/" style="font-size: 10px;">Dex</a> <a href="/tags/ELF/" style="font-size: 11.25px;">ELF</a> <a href="/tags/Fedora/" style="font-size: 10px;">Fedora</a> <a href="/tags/FileProvider/" style="font-size: 12.5px;">FileProvider</a> <a href="/tags/FileVault/" style="font-size: 10px;">FileVault</a> <a href="/tags/Font/" style="font-size: 10px;">Font</a> <a href="/tags/Fragment/" style="font-size: 10px;">Fragment</a> <a href="/tags/Fresco/" style="font-size: 10px;">Fresco</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Gradle/" style="font-size: 15px;">Gradle</a> <a href="/tags/HBase/" style="font-size: 10px;">HBase</a> <a href="/tags/Hackintosh/" style="font-size: 11.25px;">Hackintosh</a> <a href="/tags/Hadoop/" style="font-size: 10px;">Hadoop</a> <a href="/tags/HardwareAccelerate/" style="font-size: 10px;">HardwareAccelerate</a> <a href="/tags/Hexo/" style="font-size: 11.25px;">Hexo</a> <a href="/tags/Hive/" style="font-size: 10px;">Hive</a> <a href="/tags/Hotpatch/" style="font-size: 10px;">Hotpatch</a> <a href="/tags/HttpClient/" style="font-size: 10px;">HttpClient</a> <a href="/tags/IPC/" style="font-size: 11.25px;">IPC</a> <a href="/tags/Issues/" style="font-size: 10px;">Issues</a> <a href="/tags/Iterator/" style="font-size: 10px;">Iterator</a> <a href="/tags/JUnit/" style="font-size: 10px;">JUnit</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/JitPack/" style="font-size: 10px;">JitPack</a> <a href="/tags/Kernel/" style="font-size: 10px;">Kernel</a> <a href="/tags/Linux/" style="font-size: 18.75px;">Linux</a> <a href="/tags/LoadLibrary/" style="font-size: 10px;">LoadLibrary</a> <a href="/tags/Makefile/" style="font-size: 10px;">Makefile</a> <a href="/tags/Memery-Allocation/" style="font-size: 10px;">Memery Allocation</a> <a href="/tags/Messenger/" style="font-size: 11.25px;">Messenger</a> <a href="/tags/Mock/" style="font-size: 10px;">Mock</a> <a href="/tags/Mount/" style="font-size: 10px;">Mount</a> <a href="/tags/Multidex/" style="font-size: 10px;">Multidex</a> <a href="/tags/Mysql/" style="font-size: 11.25px;">Mysql</a> <a href="/tags/Nexus5/" style="font-size: 12.5px;">Nexus5</a> <a href="/tags/Nginx/" style="font-size: 11.25px;">Nginx</a> <a href="/tags/Openstack/" style="font-size: 10px;">Openstack</a> <a href="/tags/Ordinary/" style="font-size: 16.25px;">Ordinary</a> <a href="/tags/Path/" style="font-size: 10px;">Path</a> <a href="/tags/PhotoView/" style="font-size: 10px;">PhotoView</a> <a href="/tags/PopupWindow/" style="font-size: 12.5px;">PopupWindow</a> <a href="/tags/Proguard/" style="font-size: 10px;">Proguard</a> <a href="/tags/Python/" style="font-size: 11.25px;">Python</a> <a href="/tags/RE/" style="font-size: 10px;">RE</a> <a href="/tags/Realm/" style="font-size: 11.25px;">Realm</a> <a href="/tags/Retrofit/" style="font-size: 11.25px;">Retrofit</a> <a href="/tags/RoundingMode/" style="font-size: 10px;">RoundingMode</a> <a href="/tags/RxBinding/" style="font-size: 10px;">RxBinding</a> <a href="/tags/RxJava/" style="font-size: 13.75px;">RxJava</a> <a href="/tags/RxLifecycle/" style="font-size: 10px;">RxLifecycle</a> <a href="/tags/SVG/" style="font-size: 10px;">SVG</a> <a href="/tags/Screen/" style="font-size: 10px;">Screen</a> <a href="/tags/Scroller/" style="font-size: 10px;">Scroller</a> <a href="/tags/StartupWMClass/" style="font-size: 10px;">StartupWMClass</a> <a href="/tags/Stetho/" style="font-size: 10px;">Stetho</a> <a href="/tags/Sudoers/" style="font-size: 11.25px;">Sudoers</a> <a href="/tags/TensorFlow/" style="font-size: 12.5px;">TensorFlow</a> <a href="/tags/Theme/" style="font-size: 10px;">Theme</a> <a href="/tags/Transformer/" style="font-size: 10px;">Transformer</a> <a href="/tags/Transition/" style="font-size: 11.25px;">Transition</a> <a href="/tags/UEFI/" style="font-size: 10px;">UEFI</a> <a href="/tags/Unity/" style="font-size: 10px;">Unity</a> <a href="/tags/Uri/" style="font-size: 10px;">Uri</a> <a href="/tags/Vim/" style="font-size: 11.25px;">Vim</a> <a href="/tags/VirtualBox/" style="font-size: 10px;">VirtualBox</a> <a href="/tags/Vue/" style="font-size: 12.5px;">Vue</a> <a href="/tags/Vuex/" style="font-size: 10px;">Vuex</a> <a href="/tags/Weex/" style="font-size: 12.5px;">Weex</a> <a href="/tags/Wine/" style="font-size: 10px;">Wine</a> <a href="/tags/YCM/" style="font-size: 11.25px;">YCM</a> <a href="/tags/btrfs/" style="font-size: 10px;">btrfs</a> <a href="/tags/debugfs/" style="font-size: 10px;">debugfs</a> <a href="/tags/dnf/" style="font-size: 10px;">dnf</a> <a href="/tags/efibootmgr/" style="font-size: 10px;">efibootmgr</a> <a href="/tags/iOSm-iMazing/" style="font-size: 10px;">iOSm iMazing</a> <a href="/tags/inobounce/" style="font-size: 10px;">inobounce</a> <a href="/tags/libGDX/" style="font-size: 11.25px;">libGDX</a> <a href="/tags/lsof/" style="font-size: 10px;">lsof</a> <a href="/tags/macOS/" style="font-size: 17.5px;">macOS</a> <a href="/tags/node-js/" style="font-size: 11.25px;">node.js</a> <a href="/tags/npm/" style="font-size: 11.25px;">npm</a> <a href="/tags/objdump/" style="font-size: 10px;">objdump</a> <a href="/tags/share/" style="font-size: 10px;">share</a> <a href="/tags/vux/" style="font-size: 10px;">vux</a> <a href="/tags/webpack/" style="font-size: 12.5px;">webpack</a> <a href="/tags/webpack-dev-server/" style="font-size: 10px;">webpack-dev-server</a> <a href="/tags/zRAM/" style="font-size: 10px;">zRAM</a> <a href="/tags/速记/" style="font-size: 13.75px;">速记</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/23/Broadcast和Receiver的变更/">Broadcast和Receiver的变更</a>
          </li>
        
          <li>
            <a href="/2019/03/30/Gradle依赖管理踩坑/">Gradle依赖管理踩坑</a>
          </li>
        
          <li>
            <a href="/2019/02/12/macOS-Default-Setting/">macOS Default Setting</a>
          </li>
        
          <li>
            <a href="/2018/11/13/Git-ignore-file-locally/">Git ignore file locally</a>
          </li>
        
          <li>
            <a href="/2018/09/04/Android-无法扫描蓝牙设备踩坑/">Android 无法扫描蓝牙设备踩坑</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Weibo show</h3>
    <div class="widget-weibo">
      <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="//widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2594140111&verifier=ec1b7a42&dpc=1"></iframe>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Fionera<br>
      巨大能量来源 <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives/" class="mobile-nav-link">文章</a>
  
    <a href="/resume/" class="mobile-nav-link">简历</a>
  
    <a href="/about/" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>




  </div>
</body>
</html>